input {

  tcp {
    port => 5514
    type => syslog
  }

  file {
    path => "/var/log/ceilometer/*.log"
    type => "openstack_log"
    add_field => {"component" => "ceilometer"}
    sincedb_path => "/opt/logstash"
    start_position => "beginning"
  }

  file {
    path => "/var/log/libvirt/*.log"
    type => "libvirt_log"
    add_field => {"component" => "libvirt"}
    sincedb_path => "/opt/logstash"
    start_position => "beginning"
  }

  file {
    path => "/var/log/cinder/*.log"
    type => "openstack_log"
    add_field => {"component" => "cinder"}
    sincedb_path => "/opt/logstash"
    start_position => "beginning"
  }

  file {
    path => "/var/log/glance/*.log"
    type => "openstack_log"
    add_field => {"component" => "glance"}
    sincedb_path => "/opt/logstash"
    start_position => "beginning"
  }

  file {
    path => "/var/log/heat/*.log"
    type => "openstack_log"
    add_field => {"component" => "heat"}
    sincedb_path => "/opt/logstash"
    start_position => "beginning"
  }

# look into horizon logging config.  there are no timestamps on log messages which will make things very difficult to parse.
#  file {
#    path => "/var/log/horizon/*.log"
#    type => "openstack_log"
#    tags => ["horizon"]
#    start_position => "beginning"
#  }
  
  file {
    path => "/var/log/keystone/*.log"
    type => "openstack_log"
    add_field => {"component" => "keystone"}
    sincedb_path => "/opt/logstash"
    start_position => "beginning"
  }

  file {
    path => "/var/log/neutron/*.log"
    type => "openstack_log"
    add_field => {"component" => "neutron"}
    sincedb_path => "/opt/logstash"
    start_position => "beginning"
  }

  file {
    path => "/var/log/nova/*.log"
    type => "openstack_log"
    add_field => {"component" => "nova"}
    sincedb_path => "/opt/logstash"
    start_position => "beginning"
  }

  file {
    type => "apache_log"
    path => "/var/log/httpd/*_log"
    add_field => {"component" => "apache"}
    sincedb_path => "/opt/logstash"
    start_position => "beginning"
  }

#    file {
#        type => "apache-access"
#        path => "/var/log/httpd/access_log"
#        start_position => "beginning"
#    }
#
#    file {
#        type => "apache-error"
#        path => "/var/log/httpd/error_log"
#        start_position => "beginning"
#    }

  file {
    path => "/var/log/openvswitch/*.log"
    type => "openvswitch_log"
    add_field => {"component" => "openvswitch"}
    path => "/var/log/openvswitch/*.log"
    sincedb_path => "/opt/logstash"
    start_position => "beginning"
  }

#  file {
#    path => "/var/log/audit/audit.log"
#    type => "audit_log"
#  }
#
#  file {
#    path => "/var/log/secure"
#    type => "secure_log"
#  }
#
#  file {
#    path => ["/var/log/salt/*","/var/log/yum.log"]
#    type => "sysadmin"
#  }
#
#  file {
#    path => "/var/log/cron"
#    type => cron
#  }

#  file {
#    path => ["/var/log/redis/redis.log","/var/log/elasticsearch/elasticsearch/*","/var/log/logstash.log"]
#    type => "logship"
#  }
}

output {
  redis { host => "index1" data_type => "list" key => "logstash:redis" }
}
